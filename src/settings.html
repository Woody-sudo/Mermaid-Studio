<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <script>
      (() => {
        try {
          const raw = localStorage.getItem('appearance');
          const mode =
            raw === 'light' || raw === 'dark' || raw === 'system'
              ? raw
              : 'system';
          document.documentElement.setAttribute('data-theme', mode);
        } catch (_) {
          document.documentElement.setAttribute('data-theme', 'system');
        }
      })();
    </script>
    <link rel="stylesheet" href="settings.css" />
    <script type="module" src="/settings.js"></script>
  </head>
  <body>
    <header class="settings-titlebar" data-tauri-drag-region>
      <div class="settings-title-wrap" data-tauri-drag-region>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3" />
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
        </svg>
        <h1 class="settings-title" data-tauri-drag-region data-i18n="settings_title">Settings</h1>
      </div>
      <div class="settings-toolbar-actions" data-tauri-drag-region>
        <span class="settings-toolbar-label" data-tauri-drag-region data-i18n="settings">Settings</span>
      </div>
    </header>

    <main class="settings-layout">
      <aside class="settings-sidebar">
        <div class="panel-title" data-i18n="settings_title">Settings</div>
        <nav class="settings-nav" aria-label="Settings sections">
          <button class="settings-nav-item active" type="button" data-page-target="general">
            <span class="settings-nav-icon" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="9" />
                <circle cx="12" cy="12" r="1" />
              </svg>
            </span>
            <span data-i18n="settings_menu_general">General</span>
          </button>
          <button class="settings-nav-item" type="button" data-page-target="editor">
            <span class="settings-nav-icon" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4z" />
              </svg>
            </span>
            <span data-i18n="settings_menu_editor">Editor</span>
          </button>
          <button class="settings-nav-item" type="button" data-page-target="export">
            <span class="settings-nav-icon" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" />
              </svg>
            </span>
            <span data-i18n="settings_menu_export">Export</span>
          </button>
          <button class="settings-nav-item" type="button" data-page-target="about">
            <span class="settings-nav-icon" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <line x1="12" y1="16" x2="12" y2="12" />
                <line x1="12" y1="8" x2="12.01" y2="8" />
              </svg>
            </span>
            <span data-i18n="settings_menu_about">About</span>
          </button>
        </nav>
      </aside>

      <section class="settings-content">
        <section class="settings-panel active" data-page="general">
          <header class="panel-title-row settings-panel-header">
            <h2 class="settings-panel-title" data-i18n="settings_menu_general">General</h2>
          </header>
          <div class="settings-card settings-list-card">
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="language">Language</span>
              </div>
              <label class="setting-select-wrap">
                <select id="language-select" class="setting-select">
                  <option value="zh">简体中文</option>
                  <option value="en">English</option>
                </select>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="theme_setting">Theme</span>
              </div>
              <label class="setting-select-wrap">
                <select id="appearance-select" class="setting-select">
                  <option value="system" data-i18n="auto">Auto</option>
                  <option value="light" data-i18n="light">Light</option>
                  <option value="dark" data-i18n="dark">Dark</option>
                </select>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="interface_font_size">Interface Font Size</span>
              </div>
              <input
                id="ui-font-size"
                class="setting-text-input"
                type="number"
                min="12"
                max="24"
                step="1"
                value="14"
                inputmode="numeric"
              />
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="reset_template_library">Reset Template Library</span>
              </div>
              <button id="btn-reset-template-library" class="setting-button" type="button" data-i18n="reset_template_library">
                Reset Template Library
              </button>
            </div>
          </div>
        </section>

        <section class="settings-panel" data-page="editor">
          <header class="panel-title-row settings-panel-header">
            <h2 class="settings-panel-title" data-i18n="settings_menu_editor">Editor</h2>
          </header>
          <div class="settings-card settings-list-card">
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="render_engine">Render Engine</span>
              </div>
              <label class="setting-select-wrap setting-select-wrap-wide">
                <select id="render-engine-select" class="setting-select setting-select-wide">
                  <option value="bautiful-mermaid" data-i18n="render_engine_beautiful">
                    bautiful-mermaid
                  </option>
                  <option value="mermaid-js/mermaid" data-i18n="render_engine_mermaid_js">
                    mermaid-js/mermaid
                  </option>
                </select>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="default_light_chart_theme">Default Light Chart Theme</span>
              </div>
              <label class="setting-select-wrap setting-select-wrap-wide">
                <select id="default-light-chart-theme-select" class="setting-select setting-select-wide"></select>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="default_dark_chart_theme">Default Dark Chart Theme</span>
              </div>
              <label class="setting-select-wrap setting-select-wrap-wide">
                <select id="default-dark-chart-theme-select" class="setting-select setting-select-wide"></select>
              </label>
            </div>
            <div class="setting-row setting-row-col">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="interface_font">Interface Font</span>
              </div>
              <div class="font-input-wrapper">
                <input
                  id="ui-font-input"
                  class="font-input"
                  type="text"
                  autocomplete="off"
                  spellcheck="false"
                  placeholder="Search system fonts..."
                  data-i18n-placeholder="search_fonts"
                />
                <svg
                  class="font-input-icon"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8" />
                  <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <div id="ui-font-suggestions" class="font-suggestions"></div>
              </div>
            </div>
            <div class="setting-row setting-row-col">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="code_font">Code Font</span>
              </div>
              <div class="font-input-wrapper">
                <input
                  id="code-font-input"
                  class="font-input"
                  type="text"
                  autocomplete="off"
                  spellcheck="false"
                  placeholder="Search system fonts..."
                  data-i18n-placeholder="search_fonts"
                />
                <svg
                  class="font-input-icon"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8" />
                  <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <div id="code-font-suggestions" class="font-suggestions"></div>
              </div>
            </div>
            <div class="setting-row setting-row-col">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="chart_font">Chart Font</span>
              </div>
              <div class="font-input-wrapper">
                <input
                  id="chart-font-input"
                  class="font-input"
                  type="text"
                  autocomplete="off"
                  spellcheck="false"
                  placeholder="Search system fonts..."
                  data-i18n-placeholder="search_fonts"
                />
                <svg
                  class="font-input-icon"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8" />
                  <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <div id="chart-font-suggestions" class="font-suggestions"></div>
              </div>
              <div class="font-preview" id="chart-font-preview">
                <span data-i18n="font_preview_text">The quick brown fox jumps over the lazy dog</span>
              </div>
            </div>
          </div>
        </section>

        <section class="settings-panel" data-page="export">
          <header class="panel-title-row settings-panel-header">
            <h2 class="settings-panel-title" data-i18n="settings_menu_export">Export</h2>
          </header>
          <div class="settings-card settings-list-card">
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="default_export_type">Default Export Type</span>
              </div>
              <label class="setting-select-wrap">
                <select id="export-default-format" class="setting-select">
                  <option value="svg" data-i18n="export_format_svg">SVG</option>
                  <option value="png" data-i18n="export_format_png">PNG</option>
                  <option value="pdf" data-i18n="export_format_pdf">PDF</option>
                </select>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-copy">
                <span class="setting-label" data-i18n="png_quality_setting">PNG Quality</span>
              </div>
              <div class="slider-row">
                <input id="png-quality" type="range" min="10" max="100" step="5" />
                <span id="png-quality-value" class="slider-value">85%</span>
              </div>
            </div>
          </div>
        </section>

        <section class="settings-panel" data-page="about">
          <header class="panel-title-row settings-panel-header">
            <h2 class="settings-panel-title" data-i18n="settings_menu_about">About</h2>
          </header>
          <div class="settings-card settings-card-about">
            <h3 class="settings-card-title" data-i18n="about_and_copyright">About & Copyright</h3>
            <div class="about-icon-wrap">
              <img class="about-app-icon" src="assets/app-icon.png" alt="Mermaid Studio app icon" />
            </div>
            <div class="about-line" data-i18n="copyright_line_app">Mermaid Studio</div>
            <div class="about-line" data-i18n="copyright_line_version">Version 0.8.0</div>
            <div class="about-line" data-i18n="copyright_line_owner">Copyright © 2026 Woody. All rights reserved.</div>
            <div class="about-line" data-i18n="copyright_line_notice">
              Third-party dependencies remain under their respective licenses.
            </div>
          </div>
        </section>
      </section>
    </main>
  </body>
</html>
